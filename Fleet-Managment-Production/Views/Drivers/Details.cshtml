@model Fleet_Managment_Production.Models.Driver

@{
    ViewData["Title"] = "Szczegóły Kierowcy";
}

<h1>Szczegóły Kierowcy</h1>

<div>
    <hr />
    <dl class="row">
        <dt class="col-sm-3">Imię i Nazwisko</dt>
        <dd class="col-sm-9">@Model.FirstName @Model.LastName</dd>

        <dt class="col-sm-3">Konto użytkownika</dt>
        <dd class="col-sm-9">@Model.User?.Email</dd>

        <dt class="col-sm-3">Status</dt>
        <dd class="col-sm-9">
            @if (Model.IsForeigner)
            {
                <span class="badge bg-info text-dark">Obcokrajowiec</span>
            }
            else
            {
                <span>Obywatel PL</span>
            }
        </dd>

        <dt class="col-sm-3">PESEL</dt>
        <dd class="col-sm-9">@(string.IsNullOrEmpty(Model.PESEL) ? "Brak" : Model.PESEL)</dd>

        <dt class="col-sm-3">Data Urodzenia</dt>
        <dd class="col-sm-9">@Model.DateOfBirth.ToShortDateString()</dd>

        <dt class="col-sm-3">Nr Prawa Jazdy</dt>
        <dd class="col-sm-9">@Html.DisplayFor(model => model.LicenseNumber)</dd>

        <dt class="col-sm-3">Kategorie</dt>
        <dd class="col-sm-9">
            @if (Model.LicenseCategories != null && Model.LicenseCategories.Any())
            {
                foreach (var cat in Model.LicenseCategories)
                {
                    <span class="badge bg-secondary me-1">@cat</span>
                }
            }
            else
            {
                <span class="text-muted">Brak kategorii</span>
            }
        </dd>

        <dt class="col-sm-3">Ważność PJ</dt>
        <dd class="col-sm-9">@Model.LicenseExpiryDate.ToShortDateString()</dd>

        <dt class="col-sm-3">Badania lekarskie</dt>
        <dd class="col-sm-9">
            @(Model.MedicalExamExpiryDate.HasValue? Model.MedicalExamExpiryDate.Value.ToShortDateString() : "Brak danych")
        </dd>
    </dl>
</div>

<div class="mt-4">
    <h4>Przypisane Pojazdy</h4>
    @if (Model.Vehicles != null && Model.Vehicles.Any())
    {
        <table class="table table-sm table-bordered">
            <thead>
                <tr>
                    <th>Marka i Model</th>
                    <th>Nr Rejestracyjny</th>
                    <th>VIN</th>
                </tr>
            </thead>
            <tbody>
                @foreach (var car in Model.Vehicles)
                {
                    <tr>
                        <td>@car.Make @car.Model</td>
                        <td>@car.LicensePlate</td>
                        <td>@car.VIN</td>
                    </tr>
                }
            </tbody>
        </table>
    }
    else
    {
        <p class="text-muted">Brak pojazdów.</p>
    }
</div>

<div class="mt-3">
    <a asp-action="Edit" asp-route-id="@Model?.Id" class="btn btn-warning">Edytuj</a>
    <a asp-action="Index" class="btn btn-secondary">Powrót</a>
</div>