@model Fleet_Managment_Production.Models.Vehicle

@{
    ViewData["Title"] = "Szczegóły Pojazdu";
}

<h1>Szczegóły Pojazdu</h1>

<div>
    <h4>@Model.Make @Model.Model</h4>
    <hr />
    <dl class="row">
        <dt class="col-sm-3">Nr Rejestracyjny</dt>
        <dd class="col-sm-9">@Html.DisplayFor(model => model.LicensePlate)</dd>

        <dt class="col-sm-3">VIN</dt>
        <dd class="col-sm-9">@Html.DisplayFor(model => model.VIN)</dd>

        <dt class="col-sm-3">Rok produkcji</dt>
        <dd class="col-sm-9">@Html.DisplayFor(model => model.ProductionYear)</dd>

        <dt class="col-sm-3">Typ paliwa</dt>
        <dd class="col-sm-9">@Html.DisplayFor(model => model.FuelType)</dd>

        <dt class="col-sm-3">Aktualny przebieg</dt>
        <dd class="col-sm-9">@Model.CurrentKm km</dd>

        <dt class="col-sm-3">Status</dt>
        <dd class="col-sm-9">@Html.DisplayFor(model => model.Status)</dd>

        <dt class="col-sm-3">Właściciel (System)</dt>
        <dd class="col-sm-9">@Model.User?.Email</dd>

        <dt class="col-sm-3 text-primary">Przypisany Kierowca</dt>
        <dd class="col-sm-9">
            @if (Model.Driver != null)
            {
                <strong>@Model.Driver.FirstName @Model.Driver.LastName</strong>
                if (!string.IsNullOrEmpty(Model.Driver.PESEL))
                {
                    <span class="text-muted ms-2">(PESEL: @Model.Driver.PESEL)</span>
                }
                <br />
                <a asp-controller="Drivers" asp-action="Details" asp-route-id="@Model.DriverId" class="btn btn-sm btn-link p-0">
                    Zobacz profil kierowcy &raquo;
                </a>
            }
            else
            {
                <span class="text-muted">Brak przypisanego kierowcy</span>
            }
        </dd>
    </dl>
</div>

<div class="mt-4">
    <h4>Polisy Ubezpieczeniowe</h4>
    @if (Model.Insurances != null && Model.Insurances.Any())
    {
        <ul class="list-group">
            @foreach (var insurance in Model.Insurances)
            {
                <li class="list-group-item d-flex justify-content-between align-items-center">
                    <div>
                        <strong>@insurance.PolicyNumber</strong> (@insurance.InsurareName)
                        <br />
                        <small class="text-muted">Ważne do: @insurance.ExpiryDate.ToShortDateString()</small>
                    </div>
                    <span class="badge bg-secondary">@insurance.Cost PLN</span>
                </li>
            }
        </ul>
    }
    else
    {
        <p class="text-muted">Brak zarejestrowanych ubezpieczeń.</p>
    }
</div>

<div class="mt-3">
    <a asp-action="Edit" asp-route-id="@Model?.VehicleId" class="btn btn-warning">Edytuj</a>
    <a asp-action="Index" class="btn btn-secondary">Powrót</a>
</div>