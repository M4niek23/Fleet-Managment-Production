@using Fleet_Managment_Production.ViewModels
@model InspectionsViewModel

@{
    ViewData["Title"] = "Przeglądy Techniczne";
}

<div class="container-fluid py-4">
    <div class="card shadow-sm border-0">

        <div class="card-header bg-white py-3 d-flex justify-content-between align-items-center">
            <h5 class="mb-0 fw-bold text-warning text-dark"><i class="bi bi-tools me-2"></i>Przeglądy</h5>
            <a asp-action="Create" class="btn btn-warning btn-sm rounded-pill px-3">
                <i class="bi bi-plus-lg"></i> Dodaj przegląd
            </a>
        </div>

        <div class="card-header bg-light border-bottom-0 p-0">
            <ul class="nav nav-tabs nav-fill card-header-tabs m-0" id="inspectionTabs" role="tablist">
                <li class="nav-item" role="presentation">
                    <button class="nav-link active fw-bold py-3" id="active-tab" data-bs-toggle="tab" data-bs-target="#active" type="button" role="tab">
                        <i class="bi bi-check-circle me-2"></i>Aktualne i Nadchodzące
                        <span class="badge bg-success rounded-pill ms-2">@Model.ActiveInspections.Count</span>
                    </button>
                </li>
                <li class="nav-item" role="presentation">
                    <button class="nav-link fw-bold py-3 text-danger" id="negative-tab" data-bs-toggle="tab" data-bs-target="#negative" type="button" role="tab">
                        <i class="bi bi-exclamation-triangle me-2"></i>Usterki / Negatywne
                        @if (Model.NegativeInspections.Any())
                        {
                            <span class="badge bg-danger rounded-pill ms-2">@Model.NegativeInspections.Count</span>
                        }
                    </button>
                </li>
                <li class="nav-item" role="presentation">
                    <button class="nav-link fw-bold py-3 text-muted" id="history-tab" data-bs-toggle="tab" data-bs-target="#history" type="button" role="tab">
                        <i class="bi bi-clock-history me-2"></i>Historia
                    </button>
                </li>
            </ul>
        </div>

        <div class="card-body p-0">
            <div class="tab-content" id="inspectionTabsContent">

                <div class="tab-pane fade show active" id="active" role="tabpanel">
                    @await Html.PartialAsync("_InspectionTable", Model.ActiveInspections)
                </div>

                <div class="tab-pane fade" id="negative" role="tabpanel">
                    @await Html.PartialAsync("_InspectionTable", Model.NegativeInspections)
                </div>

                <div class="tab-pane fade" id="history" role="tabpanel">
                    @await Html.PartialAsync("_InspectionTable", Model.HistoricalInspections)
                </div>

            </div>
        </div>
    </div>
</div>